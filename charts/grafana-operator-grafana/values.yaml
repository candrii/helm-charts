# =============================================================================
# GRAFANA OPERATOR - GRAFANA CRD
# Maps directly to grafana.integreatly.org/v1beta1 Grafana spec
# https://grafana.github.io/grafana-operator/docs/api/
# =============================================================================

# Enable/disable Grafana CR creation
enabled: true

# Grafana CR metadata
metadata:
  name: ""  # Defaults to release name
  namespace: ""  # Defaults to release namespace
  labels: {}
  annotations: {}

# =============================================================================
# GRAFANA SPEC - Direct API mapping
# All fields below map directly to spec.* in the Grafana CRD
# =============================================================================

# Grafana version (container image tag)
# Supports: version tag, full image reference, or SHA256 digest
version: "11.4.0"

# Grafana configuration (grafana.ini sections)
# Maps to spec.config
config:
  log:
    mode: "console"
  server: {}
  security: {}
  auth: {}
  # Add any grafana.ini section here

# Instance selector for dashboards/datasources
# GrafanaDashboard/GrafanaDatasource CRs with matching labels will sync to this instance
instanceSelector:
  matchLabels:
    dashboards: "grafana"

# Disable default admin credentials secret creation
disableDefaultAdminSecret: false

# Disable default security context (Pod, Container, or All)
disableDefaultSecurityContext: ""

# Suspend reconciliation
suspend: false

# Grafana preferences
preferences: {}
  # homeDashboardUid: ""

# Jsonnet library configuration
jsonnet: {}
  # libraryLabelSelector:
  #   matchLabels:
  #     jsonnet: "true"

# =============================================================================
# DEPLOYMENT - spec.deployment
# Maps to DeploymentV1 (metadata + spec)
# =============================================================================
deployment:
  metadata:
    labels: {}
    annotations: {}
  spec:
    replicas: 1
    # strategy:
    #   type: RollingUpdate
    #   rollingUpdate:
    #     maxSurge: 1
    #     maxUnavailable: 0
    template:
      metadata:
        labels: {}
        annotations: {}
      spec:
        securityContext:
          runAsNonRoot: true
          runAsUser: 472
          runAsGroup: 472
          fsGroup: 472
        containers:
          - name: grafana
            securityContext:
              allowPrivilegeEscalation: false
              capabilities:
                drop:
                  - ALL
            resources:
              requests:
                cpu: 100m
                memory: 256Mi
              limits:
                memory: 512Mi
            env: []
            # - name: GF_INSTALL_PLUGINS
            #   value: "grafana-clock-panel"
            volumeMounts: []
        volumes: []
        nodeSelector: {}
        tolerations: []
        affinity: {}
        # initContainers: []

# =============================================================================
# SERVICE - spec.service
# Maps to ServiceV1 (metadata + corev1.ServiceSpec)
# =============================================================================
service:
  metadata:
    labels: {}
    annotations: {}
  spec:
    type: ClusterIP
    ports:
      - name: grafana
        port: 3000
        protocol: TCP
        targetPort: 3000

# =============================================================================
# INGRESS - spec.ingress
# Maps to IngressNetworkingV1 (metadata + networkingv1.IngressSpec)
# =============================================================================
ingress:
  enabled: false
  metadata:
    labels: {}
    annotations: {}
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  spec:
    ingressClassName: ""
    rules: []
    # - host: grafana.example.com
    #   http:
    #     paths:
    #       - path: /
    #         pathType: Prefix
    #         backend:
    #           service:
    #             name: grafana-service
    #             port:
    #               number: 3000
    tls: []
    # - hosts:
    #     - grafana.example.com
    #   secretName: grafana-tls

# =============================================================================
# PERSISTENT VOLUME CLAIM - spec.persistentVolumeClaim
# Maps to PersistentVolumeClaimV1 (metadata + PersistentVolumeClaimV1Spec)
# =============================================================================
persistentVolumeClaim:
  enabled: false
  metadata:
    labels: {}
    annotations: {}
  spec:
    accessModes:
      - ReadWriteOnce
    resources:
      requests:
        storage: 10Gi
    # storageClassName: ""
    # volumeMode: Filesystem

# =============================================================================
# SERVICE ACCOUNT - spec.serviceAccount
# Maps to ServiceAccountV1
# =============================================================================
serviceAccount:
  enabled: true
  metadata:
    name: ""  # Defaults to grafana-sa
    labels: {}
    annotations: {}
  imagePullSecrets: []
  automountServiceAccountToken: true

# =============================================================================
# CLIENT - spec.client
# Operator-to-Grafana API client settings
# =============================================================================
client: {}
  # useKubeAuth: false
  # timeout: 10
  # preferIngress: false
  # headers: {}
  # tls:
  #   insecureSkipVerify: false
  #   certSecretRef:
  #     name: ""
  #     namespace: ""

# =============================================================================
# EXTERNAL - spec.external
# For managing existing Grafana instances (not deployed by operator)
# =============================================================================
external:
  enabled: false
  url: ""
  # API key authentication
  apiKey: {}
    # name: grafana-api-key
    # key: api-key
  # Admin user/password authentication
  adminUser: {}
    # name: grafana-admin
    # key: username
  adminPassword: {}
    # name: grafana-admin
    # key: password
  tls: {}
    # insecureSkipVerify: false
    # certSecretRef:
    #   name: ""
    #   namespace: ""

# =============================================================================
# ROUTE - spec.route (OpenShift only)
# Maps to RouteOpenshiftV1
# =============================================================================
route:
  enabled: false
  metadata:
    labels: {}
    annotations: {}
  spec: {}
    # host: grafana.apps.example.com
    # path: /
    # tls:
    #   termination: edge
    #   insecureEdgeTerminationPolicy: Redirect

# =============================================================================
# HTTP ROUTE - spec.httpRoute (Gateway API)
# Maps to HTTPRouteV1
# =============================================================================
httpRoute:
  enabled: false
  metadata:
    labels: {}
    annotations: {}
  spec: {}
    # parentRefs:
    #   - name: gateway
    #     namespace: gateway-system
    # hostnames:
    #   - grafana.example.com
    # rules:
    #   - matches:
    #       - path:
    #           type: PathPrefix
    #           value: /
